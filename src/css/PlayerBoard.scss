#ebd-body {
  --pb_cellsize:6vh;
}

// need to change the background of player area, pink does not work with the theme
.player-board {
  background-color: #9E9E9E;
}
.player-board.roundedboxdisabled
{
  background-color: #868686d4;
}

.mcompact {

  .player_area {
    border: 0.4vh solid var(--plcolor);
    position: relative;
    border-radius: 1vh;
    background: linear-gradient(-35deg, rgba(51, 51, 51, 0.7) 0%, rgba(225, 225, 225, 0.5) 24%, rgba(158, 158, 158, 0.5) 82%, rgba(225, 225, 225, 0.9) 100%);
    --card-count:1;
    margin-bottom: 1vh;
  }
  .player_area_name {
/*    padding: 0.3vh;
    position: absolute;
    z-index: 1;
    color: var(--plcolor);
    font-family: "Prototype";
    left: 0;
    width: calc(var(--card-width) * 1);
    display: flex;
    justify-content: center;
    align-items: center;
    top: 25%;*/
    position: absolute;
    z-index: 1;
    color: var(--plcolor);
    font-family: var(--mars-font);
    left: 0;
    min-width: calc(var(--card-width) * 1);
    display: flex;
    justify-content: center;
    align-items: center;
    top: 12%;
    border: 0.3vh solid gray;
    border-radius: 13px;
    background: linear-gradient(to top, lightgrey 0%, lightgrey 1%, #e0e0e0 26%, #efefef 48%, #d9d9d9 75%, #bcbcbc 100%);
    box-shadow: 2px 2px 3px 1px rgba(0, 0, 0, 0.5);
  }

  .playerboard {
    position: relative;
    width:100%;
    height: fit-content;
    display: flex;
    --resourcesize: 2em;
    --producesize: 1.6em;
    font-family: var(--mars-font);
    flex-wrap: wrap;
  }

  .playerboard_group {
    position: relative;
    width: fit-content;
    height: fit-content;
    display: flex;
    flex-direction: column;
  }

}

  .playerboard_own{
    width: var(--pb_cellsize);
    height: calc(var(--pb_cellsize) *0.5);
    display: flex;
    justify-content: space-evenly;
    align-items: center;
  }

  .mini .playerboard_own {
    width: calc(var(--pb_cellsize) *0.8);
  }

  .playerboard_produce{
    width: var(--pb_cellsize);
    background-image: url('img/prodtexture.png');
    background-size: 100% 100%;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    color:white;
  }

  .player_area  .playerboard_produce{
    height: calc(var(--pb_cellsize) *0.5);
  }

.mcompact {
  .pboard {
    display: none; /* real player board: hide for this layout */
  }
  .playerboard_header{
    width: 100%;
    display: flex;
  }

  .player_area .location {
    width: revert;
  }
  .tableau {
    display: flex;
    flex-wrap: wrap;
    padding: 0.5vh;

    .card[data-card-type="1"] {
     order:2;
    }
    .card[data-card-type="2"] {
      order:1;
    }
    .card[data-card-type="3"] {
      order:3;
    }
    .corp {
      order: 4;
    }
  }
  }

  .tableau>.counter {
    display: none;
  }

  .player_tags{
    position: relative;
    display: flex;
    width: 100%;
    height:fit-content;
    flex-wrap: wrap;
  /*  left: 3%;*/
  }

.playerboard_header {
  .player_tags .badge, .player_tags .tracker{
    position: relative;
    width: calc(var(--pb_cellsize) * 0.5);
    height: calc(var(--pb_cellsize) * 0.5);

    display: inline-grid;
    grid-template-columns: calc(var(--pb_cellsize) * 0.5) calc(var(--pb_cellsize) * 0.3);
    grid-column-start: 1;
    font-size: calc(var(--pb_cellsize) * 0.3);
    margin-right: calc(var(--pb_cellsize) * 0.3);
  }
}



    .player_area{
      .player_tags .tracker::after {
        content: attr(data-state);
        grid-column-start: 2;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: var(--mars-font);
  
      }
  
      .player_tags .tracker[data-state="0"] {
        display: none;
      }
    }




.tracker.tile_8 {background-position: -400% -100%;}
.tracker.tile_64 {background-position: -600% -100%;}
.tracker.tile_67 {background-position: -600% -100%;}
.tracker.tile_85 {background-position: -700% -100%;}
.tracker.tile_128 {background-position: -900% -100%;}
.tracker.tile_123 {background-position: -1300% -100%;}
.tracker.tile_140 {background-position: -1000% -100%;}
.tracker.tile_142 {background-position: -1100% -100%;}
.tracker.tile_44 {background-position: -500%  -100%;}
.tracker.tile_natural {background-position: -500% -100%;}
.tracker.tile_97 {background-position: -800% -100%;}
.tracker.tile_199 {background-position: -1200% -100%;}


.tracker_tagVenus{
    display: none;
  }

  .player_controls{
    position: relative;
    display: flex;
    width:100%;
    justify-content: flex-end;
  }

  .filter_button{
    border: calc(var(--pb_cellsize) * 0.01) solid black;
    margin-left: 0.5vw;
    font-size: calc(var(--pb_cellsize) * 0.15);
    padding: calc(var(--pb_cellsize) * 0.03);
    border-radius: calc(var(--pb_cellsize) * 0.05);
    cursor: pointer;
    user-select: none;
  }
  .filter_button.filter_blue {
    background-color: #67b1f1;
  }
  .filter_button.filter_green {
    background-color: #b5ff82;
  }
  .filter_button.filter_red {
    background-color: #fcb2b2;
  }
  .filter_button[data-enabled="1"]::before {
    content:'☑' ;
  }
  .filter_button[data-enabled="0"]::before {
    content:'☐' ;
  }

.mcompact {
  .tableau[data-visibility_2="0"] {
    .cards_2, .cards_2a {
      visibility: hidden;
    }
    .card[data-card-type="2"] {
      /*position: absolute;*/
      opacity: 0;
    }
  }
  .tableau[data-visibility_1="0"] {
    .cards_1,  .cards_1vp  {
      visibility: hidden;
    }
    .card[data-card-type="1"] {
      /*position: absolute;*/
      opacity: 0;
    }
  }
  .tableau[data-visibility_3="0"] {
    .cards_3, .cards_3vp {
      visibility: hidden;
    }
    .card[data-card-type="3"] {
      /*position: absolute;*/
      opacity: 0;
    }
  }

  .tableau[data-visibility_0="1"] {
    display: flex;
    .cards_2a {
      order: 0;
    }
    .cards_2{
      order: 1;
    }
    .cards_1vp{
      order: 2;
    }
    .cards_3vp{
      order: 3;
    }
    .cards_1{
      order: 4;
    }
    .cards_3{
      order: 5;
    }

    .cards_2, .cards_2a {
      visibility: visible;
    }
    .cards_1,  .cards_1vp  {
      visibility: visible;
    }
    .cards_3, .cards_3vp {
      visibility: visible;

    }
    .card[data-card-type="2"] {
      opacity: 1;
    }
    .card[data-card-type="1"] {
      opacity: 1;
    }
    .card[data-card-type="3"] {
      opacity: 1;
    }
  }

    .cards_1, .cards_3 {
      display: flex;

      /*
      .card:not(:last-child):not(:hover) {
        height: calc(var(--card-height) * 0.18);
        overflow: hidden;

        .card_bg{
          height:calc(var(--card-height));
        }
        .card_illustration{
          display: none;
        }
        .card_vp{
          display: none;
        }
        .card_title {
          height:revert;
          height: 28%;
          top:62%;
        }
        .card_action{
          display: none;
        }
        .card_effect{
          display: none;
        }
      }

      .card:hover {
        z-index:10;
        transform: translateY(-5%);
        transition: all 100ms;
      }

       */
    }
  }

  .corp_holder {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .counters_holder{
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
    width: calc(var(--resourcesize) * 15.5);
    --resourcesize:4vh;
  }

  .corp_effect .card {
    width: calc(var(--card-width) * 0.7);
    height: calc(var(--card-height) * 0.3);
    overflow: hidden;
    .card_initial {
      display: none;
    }
    .card_effect {
      left: 6%;
      top: 54%;
      width: 91%;
    }
    .card_bg {
      width: 220%;
      height: 260%;
      pointer-events: none;
    }
  }

  .corp_logo  {
    width: calc(var(--card-width) * 1);
    height: calc(var(--card-width) * 0.294);
    background-image: url("img/corps_logos.png");
    background-size: 700% 200%;
  }

  .corp_logo[data-corp="card_corp_1"]{background-position: 0 0;}
  .corp_logo[data-corp="card_corp_2"]{background-position: -100% 0;}
  .corp_logo[data-corp="card_corp_3"]{background-position: -200% 0;}
  .corp_logo[data-corp="card_corp_4"]{background-position: -300% 0;}
  .corp_logo[data-corp="card_corp_5"]{background-position: -400% 0;}
  .corp_logo[data-corp="card_corp_6"]{background-position: -500% 0;}
  .corp_logo[data-corp="card_corp_7"]{background-position: -600% 0;}
  .corp_logo[data-corp="card_corp_9"]{background-position: 0 -100%;}
  .corp_logo[data-corp="card_corp_8"]{background-position: -100% -100%;}
  .corp_logo[data-corp="card_corp_10"]{background-position: -200% -100%;}
  .corp_logo[data-corp="card_corp_11"]{background-position: -300% -100%;}
  .corp_logo[data-corp="card_corp_12"]{background-position: -400% -100%;}
  .corp_logo[data-corp="card_corp_13"]{background-position: -500% -100%;}


.mcompact {
  .player_counters {

    .tr_playerboard{
      width: calc(var(--resourcesize) * 1.3);
      height: calc(var(--resourcesize) * 1);
      display: flex;
      justify-content: flex-start;
      align-items: center;
      .tracker_tr{
        width: calc(var(--resourcesize)*1.3);
        height: calc(var(--resourcesize)*1.3);
        .tracker:after {
          line-height: var(--pb_cellsize);
          text-shadow: #000 0px 0px 2px, #000 0px 0px 2px, #000 0px 0px 2px, #000 0px 0px 2px, #000 0px 0px 2px, #000 0px 0px 2px;
          color: white;
          font-size: calc(var(--pb_cellsize) * 0.4);
          font-family: var(--mars-font);
        }
      }
    }

    .playerboard_group {
      position: relative;
      width: fit-content;
      height: fit-content;
      display: grid;
      grid-template-columns: 60% 40%;
      grid-template-rows: repeat(2, 1fr);
      grid-column-gap: 0px;
      grid-row-gap: 0px;
      width: calc(var(--resourcesize)*2.2);
      height: calc(var(--resourcesize)*1);
      font-family: var(--mars-font);
      font-size:calc(var(--resourcesize) * 0.5);
      margin: calc(var(--resourcesize) * 0.06);

      .playerboard_group_img {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        grid-area: 1 / 1 / 4 / 2;
        .token_img {
          margin-right: 0;
        }
      }
      .playerboard_produce {
        width: revert;
        height:revert;
        grid-area: 2 / 2 / 3 / 3;
        overflow: hidden;
      }
      .playerboard_own {
        width: revert;
        height:revert;
        background: #ffffff7d;
        grid-area: 1 / 2 / 2 / 3;
        overflow: hidden;
      }

      .player_tags .badge[data-state="0"], .tracker[data-state="0"] {
        display: revert;
      }
    }

    .playerboard_own{
      width: var(--pb_cellsize);
      height: calc(var(--pb_cellsize) *0.5);
      display: flex;
      justify-content: space-evenly;
      align-items: center;
    }

  }
  .player_counters{
    display: flex;


    .playerboard_header .playerboard_group {
      margin: 0;
      font-size:calc(var(--resourcesize) * 0.3);
      font-weight: normal;
    }
  }

  .viewcards_button {
    display: flex;
    width: fit-content;
    height: fit-content;
    background: white;
    border-radius:3%;
    padding: calc(var(--pb_cellsize) * 0.06);
    cursor: pointer;
    margin-right:calc(var(--pb_cellsize) * 0.06);
  }

  .buttoncard {
    // card form factor is 3/4
    width: calc(var(--pb_cellsize) * 0.3);
    height: calc(var(--pb_cellsize) * 0.4);
    font-size: calc(var(--pb_cellsize) * 0.3);
    border: 1px solid black;
    border-radius: 20%;
    // center content
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .viewcards_button[data-cardtype="0"] .buttoncard  {
    background: linear-gradient(135deg, rgba(103,177,241,1) 0%, rgba(181,255,130,1) 50%, rgba(246,76,76,1) 100%);
  }
  .viewcards_button[data-cardtype="1"] .buttoncard  {
    background-color: #b5ff82;
  }
  .viewcards_button[data-cardtype="2"] .buttoncard  {
      background-color: #67b1f1;
    }
  .viewcards_button[data-cardtype="3"] .buttoncard  {
    background-color: #f64c4c;
  }
  .viewcards_button[data-cardtype="4"]  {
    display: none; // not shown for mcompact
  }

  .viewcards_button[data-selected="0"] i {
    display: none;
  }
  .viewcards_button[data-selected="1"] .viewcardbutton_counter {
    display: none;
  }

  /* effects face down */
  .tableau .card[data-state="0"] {
    filter: unset;
  }
//used
  .tableau .card[data-state="3"] {
    filter: grayscale(0.9);
  }

  .tableau {
    display: grid;
    grid-template-columns: 1fr calc(var(--card-width)*1.1);
    grid-template-rows: 1fr 1fr;
    grid-column-gap: 5px;
    grid-row-gap: 5px;
    min-height: calc(var(--card-height)*2.1);
  }



  .cards_2a {
    grid-area: 1 / 1 / 3 / 2;
  }
  .cards_2 {
    grid-area: 1 / 2 / 3 / 3;
  }

  .cards_1vp {
    grid-area:  1 / 1 / 3 / 2;
  }
  .cards_1 {
    grid-area: 1 / 2 / 3 / 3;
  }

  .cards_3vp {
    grid-area:  1 / 1 / 3 / 2;
  }
  .cards_3 {
    grid-area: 1 / 2 / 3 / 3;
  }

  .cards_bin{
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
  }
  .cards_bin.stacked {
    flex-direction: column;
    flex-wrap: nowrap;
    .card~.card {
      margin-top: -105%;
    }
  }


  .playerboard_group_underbutton{
    width: calc(var(--resourcesize) * 1);
    height: calc(var(--resourcesize) * 1);
    background: white;
    position: absolute;
    top: -50%;
    border-radius: 50%;
    display: none;
    justify-content: center;
    align-items: center;
    font-size: small;
    .tracker {
      width: calc(var(--resourcesize) * 0.6);
      height: calc(var(--resourcesize) * 0.6);
    }
    .token_img  {
      width: calc(var(--resourcesize) * 0.6);
      height: calc(var(--resourcesize) * 0.6);
    }
  }

   .active_slot .playerboard_group_underbutton {
     display: flex;
     animation: nudge 2000ms infinite ease-in-out;
   }

  .thisplayer_zone .playerboard_group_img .token_img{
    z-index: 1;
  }





}

@keyframes nudge {
  0% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-50%);
  }
  100% {
    transform: translateY(0);
  }
}
