.cardstack {
  width: calc(var(--card-width) * 1.2);
  height: fit-content;
  transition: all 400ms ease-in;

  position: relative;
  outline: 1px dashed var(--outlinecolor);
  user-select: none;
  border-radius: calc(var(--card-width) * 0.05);
  margin: calc(var(--card-width) * 0.02) calc(var(--card-width) * 0.09) calc(var(--card-width) * 0.08) calc(var(--card-width) * 0.01);

  .stack_header {
    position: relative;
    border-radius:  calc(var(--card-width) * 0.05);

    display: flex;
    flex-direction: row;
    justify-content: space-between;
    background-color: var(--outlinecolor);

    .stack_header_left{
      width:fit-content;
      padding: 3px;
      display: flex;
      align-items: center;
    }

    .stack_header_right{
      width:fit-content;
      padding: 3px;
      display: flex;
      align-items: center;
    }

    .stack_header_middle{
       flex-grow: 100;
      display: flex;
      flex-direction: column;
    }
  }


  .topline{
    display: flex;
    flex-direction: row;
    background-color: var(--outlinecolor);
    padding: calc(var(--card-width)*0.02);
    align-items: center;
  }

  .bottomline{
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    /*height: calc(var(--card-width) * 0.25);*/
    align-items: center;
  }

  .stack_sum.cards{
    width: calc(var(--card-width)*0.15);
    height: calc(var(--card-width)*0.2);
    border-radius: 20%;
    outline:1px solid black;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--hlcolor);
    box-shadow: black 1px 1px 0px 1px;
  }

  .stack_label{
    /*margin-left: 1vh;*/
    font-family: "SpaceFont";
    font-size: calc(var(--card-height) * 0.07);
  }

  .stack_detail_txt{
    font-size: calc(var(--card-height) * 0.05);
    font-style: italic;
  }

  .stack_sum{
    display: none;
  }


  .stack_btn{
    width: calc(var(--card-width) * 0.16);
    height: calc(var(--card-width) * 0.16);
    font-size: calc(var(--card-width) * 0.1);
    border-radius: 50%;
    outline:1px solid black;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    background-color: var(--hlcolor);
    box-shadow: black 1px 1px 0px 1px;
  }
  .switchview {
    margin-right: calc(var(--card-width) * 0.02);
  }

  .popout {
    display: none;
  }

  .stack_content{
    position: relative;
    padding: calc(var(--card-width) * 0.03);
  }

  .stack_content_txt{
    position: relative;
    display: none;
    width: 100%;
    font-size: calc(var(--card-height) * 0.05);
    font-style: italic;
    color: white;
  }

}

.cardstack.blue {
  --outlinecolor: #8699fa;
  --hlcolor: #c9ccee;
}
.cardstack.red {
  --outlinecolor: #ce6565;
  --hlcolor: #daa7a7;
}
.cardstack.green {
  --outlinecolor: #68d968;
  --hlcolor: #b7d7b7;
}

.cardstack[data-currentview="0"] {

   height:calc(var(--card-width) * 0.5);

  .stack_content {
    .card {
      display: none;
    }

  }
}
.cardstack[data-currentview="1"] .stack_content{
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  flex-wrap: wrap;
  align-items: center;

  .active_slot.card {
    box-shadow: 2px 2px 3px 3px rgba(0, 0, 0, 0.5019607843), 0px 0px 0px 2px #ff9800 !important;
    transform: none;
    top: 0px;
    left: 0px;
  }
}
.cardstack[data-currentview="2"] {

  .stack_content{
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    flex-wrap: wrap;
    align-items: center;

    .break {
      flex-basis: 100%;
      height: 0;
    }

    .card {

    }

    .card~.card {
      margin-top: -95%;
    }


  }
}

.cardstack[data-currentview="3"] {
  width: fit-content;
  .stack_content{
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: center;
    flex-wrap: wrap;

  }
}
.cardstack[data-currentview="0"] {
  .stack_content_txt {
    display: block;
  }
}

.cardstack[data-currentview="2"].red,.cardstack[data-currentview="3"].red {
    .stack_content_txt {
      display: block;
      width: 100%;
    }
}

.mcompact {
  .player_controls {
    display: none;
  }
  .cardstack[data-currentview="1"] .stack_content{

    .card[data-card-type="2"] {
      background-color: #167abf;
    }
    .card[data-card-type="1"] {
      background-color: #43a31d;
    }
    .card[data-card-type="3"] {
      background-color: #ee750e;
    }

    .card {
     // height: calc(var(--card-height)*0.4);
    //  overflow: hidden;
      height:fit-content;
      margin-bottom: calc(var(--card-height)*0.03);
      padding-bottom: calc(var(--card-height) * 0.03);


      .card_decor {
        position: relative;
        display: flex;
        flex-direction: column;
        height: fit-content;
      }

      .card_outer_action {
        position: relative;
        top:0;
      }
      .card_action_bottomdecor,.card_action_text{
        display: none;
      }

      .card_resource_holder  {
        position: relative;
        margin-top: calc(var(--card-height) * 0.02);
        top:0;
      }
      .card_badges,.card_cost,.card_bg,.card_illustration,.card_effect,.card_prereq,.card_number,.card_number_binary {
        display: none;
      }

      .card_title{
        position: relative;
        top:0;

      }

      .card_vp {
        top: 0;
        right: 0;
        bottom:revert;
      }
      .card_vp.vp_custom {
        position: relative;
        margin-top: calc(var(--card-height) * 0.02);
        left: 37%;
      }
    }
  }
}

